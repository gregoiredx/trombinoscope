<html>
    <head>
        <script type="text/javascript" src="mustache.min.js" ></script>

       <script id="template" type="text/html">
           <img src="{{ src }}" title="{{ name }}" width="200">
       </script>

    </head>
    <body>

        <input type="file" name="client-file" id="get-files" multiple  />

        <div id="img_container">

        </div>

        <script>
            var filesInput = document.getElementById("get-files");
            filesInput.onchange = function() {
                var imgContainer = document.getElementById("img_container");
                while (imgContainer.firstChild) {
                    imgContainer.removeChild(imgContainer.firstChild);
                }
                for (i = 0; i < filesInput.files.length; i++) {
                    var file = filesInput.files[i];
                    console.log(file);
                    addImage(imgContainer, file);
                }
            }

            function addImage(imgContainer, file) {
                var reader  = new FileReader();
                reader.onload = function () {

                    var model = {src : reader.result, name: file.name.replace(/\.[^/.]+$/, "").replace("_", " ")};
                    var template = document.getElementById("template").innerHTML;
                    var output = Mustache.render(template, model);
                    imgContainer.innerHTML = imgContainer.innerHTML + output;
                }
                reader.readAsDataURL(file);
            }

        </script>

    </body>
    <html>
